# 设计 V1: iOS 迁移预留

## 目标
确保 Web 技术栈下的核心逻辑可迁移到 iOS，避免重构与高额成本。

## 关键策略
- 核心逻辑与 UI 分层：
  - UI 仅负责渲染与交互。
  - 数据层与任务层通过接口抽象，与运行时环境解耦。
- 避免服务端依赖：
  - 前端保持 client-first，避免依赖 Next.js 服务器特性。
  - 关键逻辑封装在纯 TS 模块，便于移植至 iOS WebView。
- Provider 抽象层：
  - 统一 OpenAI 兼容协议，避免平台特化。
- 本地存储抽象：
  - DatabaseAdapter 作为接口，未来可替换为移动端实现。
- 任务队列抽象：
  - JobQueue 作为接口，未来可迁移至 iOS 后台任务机制。

## 迁移建议路线
- 方案 A: Web + Capacitor (最快迁移)
- 方案 B: Tauri Mobile (生态不稳定但潜力高)

## 风险
- iOS 后台任务限制会影响自动标签与后台摘要任务。
