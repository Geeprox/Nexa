# Plan MVP: Chat + Branch 收口执行节奏（2026-02）

## 1. 目标
在一个稳定迭代周期内，完成可交付 MVP：
- 线性聊天可持续对话。
- 分叉图谱可继续提问。
- 全部会话/全部笔记/设置可用。
- 关键异常可观测并具备数据自愈。

## 2. 节奏拆分
## Phase A: 主链打通（已完成）
- A1 聊天发送 + Mock 流式回复。
- A2 Retry 版本链与版本切换控制。
- A3 气泡分叉与选区分叉。
- A4 首次分叉后切换图谱，并保留聊天输入。

验收:
- 能连续提问。
- 能创建分叉并继续提问。
- Retry 可切换历史版本。

## Phase B: 资产管理（已完成）
- B1 Sidebar 全部会话页 + 会话切换 + 新建会话。
- B2 笔记记录入口（消息动作 + 选区动作）。
- B3 全部笔记页渲染。
- B4 设置弹层 + Provider URL/Key 存储。

验收:
- 会话可切换并延续上下文。
- 笔记可被记录并回看。
- 设置可保存且刷新后保留。

## Phase C: 稳定性与回归防线（已完成）
- C1 全局异常日志与关键路径日志。
- C2 workspace schema 校验 + 脏数据清理 + legacy 迁移。
- C3 页面级回归测试补齐（侧栏、顶栏、图谱输入、会话、笔记、设置）。
- C4 质量门禁执行（lint/test/coverage）。

验收:
- 刷新不出现无日志异常。
- 覆盖率达标。

## Phase D: MVP 发布前收尾（待执行）
- D1 手动回归清单执行（桌面端/移动端视口）。
- D2 视觉对齐复核（sidebar-10 字重、色阶、图标、hover/active/open）。
- D3 产物验证与版本说明整理。

验收:
- 手动回归清单全部通过。
- 无 P0/P1 阻断问题。

## 3. 当前状态快照
- lint: 通过。
- test: 24 files / 95 tests 全通过。
- coverage: Statements 89.9%, Branches 81.12%, Functions 87.61%, Lines 89.9%。

## 4. 发布阻断项（Gate）
- 任一关键入口不可点击。
- 图谱模式失去输入能力。
- 会话状态刷新丢失或持久化损坏。
- 设置保存失败且无可见反馈。

## 5. 下一步建议（按优先级）
1. 执行 D1 手动回归清单并固化截图基线。
2. 完成 D2 视觉逐项对照并修整。
3. 预埋真实 provider adapter 接口契约测试（不接线上）。
